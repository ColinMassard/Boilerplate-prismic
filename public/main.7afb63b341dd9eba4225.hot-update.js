"use strict";
self["webpackHotUpdateboilerplate_prismic"]("main",{

/***/ "./app/index.js":
/*!**********************!*\
  !*** ./app/index.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var normalize_wheel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! normalize-wheel */ "./node_modules/normalize-wheel/index.js");
/* harmony import */ var normalize_wheel__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(normalize_wheel__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash_each__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash/each */ "./node_modules/lodash/each.js");
/* harmony import */ var lodash_each__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_each__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var components_Preloader__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! components/Preloader */ "./app/components/Preloader.js");
/* harmony import */ var pages_About__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! pages/About */ "./app/pages/About/index.js");
/* harmony import */ var pages_Home__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! pages/Home */ "./app/pages/Home/index.js");
/* eslint-disable no-undef */





class App {
  constructor() {
    this.createContent();
    this.createPreloader();
    this.createPages();
    this.addEventListeners();
    this.addLinkListeners();
    this.onResize();
    this.update();
  }
  createPreloader() {
    this.preloader = new components_Preloader__WEBPACK_IMPORTED_MODULE_2__["default"]({
      canvas: this.canvas
    });
    this.preloader.once('completed', this.onPreloaded.bind(this));
  }
  createContent() {
    this.content = document.querySelector('.content');
    this.template = this.content.getAttribute('data-template');
  }
  createPages() {
    this.pages = {
      about: new pages_About__WEBPACK_IMPORTED_MODULE_3__["default"](),
      home: new pages_Home__WEBPACK_IMPORTED_MODULE_4__["default"]()
    };
    this.page = this.pages[this.template];
    this.page.create();
    this.onResize();
  }

  /****
   * EVENTS
   * ***/
  onPreloaded() {
    this.onResize();
    this.page.show();
  }
  onPopState() {
    this.onChange({
      url: window.location.pathname,
      push: false
    });
  }
  async onChange({
    url,
    push = true
  }) {
    await this.page.hide();
    const request = await window.fetch(url);
    if (request.status === 200) {
      const html = await request.text();
      const div = document.createElement('div');
      window.history.pushState({}, '', url);
      if (push) {
        window.history.pushState({}, '', url);
      }
      div.innerHTML = html;
      const divContent = div.querySelector('.content');
      this.template = divContent.getAttribute('data-template');
      this.navigation.onChange(this.template);
      this.content.setAttribute('data-template', this.template);
      this.content.innerHTML = divContent.innerHTML;
      this.canvas.onChangeEnd(this.template);
      this.page = this.pages[this.template];
      this.page.create();
      this.onResize();
      this.page.show();
      this.addLinkListeners();
      this.createAnimations();
    } else {
      console.log('Error');
    }
  }
  onResize() {
    if (this.page && this.page.onResize) {
      this.page.onResize();
    }
  }
  createAnimations() {
    const element = document.querySelectorAll('[data-animate]');
    if (element === null) return;
    const intersectionObserverScroll = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
        }
      });
    }, {
      rootMargin: '0px'
    });
    element.forEach(animateElement => intersectionObserverScroll.observe(animateElement));
  }
  onTouchDown(event) {}
  onTouchMove(event) {}
  onTouchUp(event) {}
  onWheel(event) {
    const normalizedWheel = normalize_wheel__WEBPACK_IMPORTED_MODULE_0___default()(event);
    if (this.page && this.page.update) {
      this.page.onWheel(normalizedWheel);
    }
  }

  /****
   * LOOPS
   * ***/
  update() {
    if (this.page && this.page.update) {
      this.page.update();
    }
  }

  /****
   * LISTENERS
   * ***/
  addEventListeners() {
    window.addEventListener('mousewheel', this.onWheel.bind(this));
    window.addEventListener('mousedown', this.onTouchDown.bind(this));
    window.addEventListener('mousemove', this.onTouchMove.bind(this));
    window.addEventListener('mouseup', this.onTouchUp.bind(this));
    window.addEventListener('touchstart', this.onTouchDown.bind(this));
    window.addEventListener('touchmove', this.onTouchMove.bind(this));
    window.addEventListener('touchend', this.onTouchUp.bind(this));
    window.addEventListener('popstate', this.onPopState.bind(this));
    window.addEventListener('resize', this.onResize.bind(this));
  }
  addLinkListeners() {
    const links = document.querySelectorAll('a');
    lodash_each__WEBPACK_IMPORTED_MODULE_1___default()(links, link => {
      link.onclick = event => {
        if (link.hasAttribute('data-anchor') !== true && link.hasAttribute('target') !== true && link.hasAttribute('data-contact') !== true) {
          event.preventDefault();
          const {
            href
          } = link;
          this.onChange({
            url: href
          });
        }
      };
    });
    const socialLinks = document.querySelectorAll('p.social-link');
    lodash_each__WEBPACK_IMPORTED_MODULE_1___default()(socialLinks, link => {
      link.onclick = event => {
        event.preventDefault();
        window.open(link.getAttribute('data-link'), '_blank');
      };
    });
  }
}
new App();

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ /* webpack/runtime/getFullHash */
/******/ (() => {
/******/ 	__webpack_require__.h = () => ("2288bfc00329335c2fdf")
/******/ })();
/******/ 
/******/ }
);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q3ZELGtEQUFJLENBQUMyRSxLQUFLLEVBQUVDLElBQUksSUFBSTtNQUNsQkEsSUFBSSxDQUFDQyxPQUFPLEdBQUdSLEtBQUssSUFBSTtRQUN0QixJQUFJTyxJQUFJLENBQUNFLFlBQVksQ0FBQyxhQUFhLENBQUMsS0FBSyxJQUFJLElBQUlGLElBQUksQ0FBQ0UsWUFBWSxDQUFDLFFBQVEsQ0FBQyxLQUFLLElBQUksSUFBSUYsSUFBSSxDQUFDRSxZQUFZLENBQUMsY0FBYyxDQUFDLEtBQUssSUFBSSxFQUFFO1VBQ25JVCxLQUFLLENBQUNVLGNBQWMsQ0FBQyxDQUFDO1VBQ3RCLE1BQU07WUFBRUM7VUFBSyxDQUFDLEdBQUdKLElBQUk7VUFDckIsSUFBSSxDQUFDOUMsUUFBUSxDQUFDO1lBQUVDLEdBQUcsRUFBRWlEO1VBQUssQ0FBQyxDQUFDO1FBQzlCO01BQ0YsQ0FBQztJQUNILENBQUMsQ0FBQztJQUVGLE1BQU1DLFdBQVcsR0FBRzlELFFBQVEsQ0FBQ29DLGdCQUFnQixDQUFDLGVBQWUsQ0FBQztJQUU5RHZELGtEQUFJLENBQUNpRixXQUFXLEVBQUVMLElBQUksSUFBSTtNQUN4QkEsSUFBSSxDQUFDQyxPQUFPLEdBQUdSLEtBQUssSUFBSTtRQUN0QkEsS0FBSyxDQUFDVSxjQUFjLENBQUMsQ0FBQztRQUN0Qi9DLE1BQU0sQ0FBQ2tELElBQUksQ0FBQ04sSUFBSSxDQUFDdEQsWUFBWSxDQUFDLFdBQVcsQ0FBQyxFQUFFLFFBQVEsQ0FBQztNQUN2RCxDQUFDO0lBQ0gsQ0FBQyxDQUFDO0VBQ0o7QUFDRjtBQUVBLElBQUlsQixHQUFHLENBQUMsQ0FBQzs7Ozs7Ozs7VUN0TVQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ib2lsZXJwbGF0ZS1wcmlzbWljLy4vYXBwL2luZGV4LmpzIiwid2VicGFjazovL2JvaWxlcnBsYXRlLXByaXNtaWMvd2VicGFjay9ydW50aW1lL2dldEZ1bGxIYXNoIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmICovXHJcbmltcG9ydCBOb3JtYWxpemVXaGVlbCBmcm9tICdub3JtYWxpemUtd2hlZWwnXHJcblxyXG5pbXBvcnQgZWFjaCBmcm9tICdsb2Rhc2gvZWFjaCdcclxuXHJcbmltcG9ydCBQcmVsb2FkZXIgZnJvbSAnY29tcG9uZW50cy9QcmVsb2FkZXInXHJcblxyXG5pbXBvcnQgQWJvdXQgZnJvbSAncGFnZXMvQWJvdXQnXHJcbmltcG9ydCBIb21lIGZyb20gJ3BhZ2VzL0hvbWUnXHJcbmNsYXNzIEFwcCB7XHJcbiAgY29uc3RydWN0b3IgKCkge1xyXG4gICAgdGhpcy5jcmVhdGVDb250ZW50KClcclxuXHJcbiAgICB0aGlzLmNyZWF0ZVByZWxvYWRlcigpXHJcbiAgICB0aGlzLmNyZWF0ZVBhZ2VzKClcclxuXHJcbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXJzKClcclxuICAgIHRoaXMuYWRkTGlua0xpc3RlbmVycygpXHJcblxyXG4gICAgdGhpcy5vblJlc2l6ZSgpXHJcbiAgICB0aGlzLnVwZGF0ZSgpXHJcbiAgfVxyXG5cclxuICBjcmVhdGVQcmVsb2FkZXIgKCkge1xyXG4gICAgdGhpcy5wcmVsb2FkZXIgPSBuZXcgUHJlbG9hZGVyKHtcclxuICAgICAgY2FudmFzOiB0aGlzLmNhbnZhc1xyXG4gICAgfSlcclxuICAgIHRoaXMucHJlbG9hZGVyLm9uY2UoJ2NvbXBsZXRlZCcsIHRoaXMub25QcmVsb2FkZWQuYmluZCh0aGlzKSlcclxuICB9XHJcblxyXG4gIGNyZWF0ZUNvbnRlbnQgKCkge1xyXG4gICAgdGhpcy5jb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRlbnQnKVxyXG4gICAgdGhpcy50ZW1wbGF0ZSA9IHRoaXMuY29udGVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGVtcGxhdGUnKVxyXG4gIH1cclxuXHJcbiAgY3JlYXRlUGFnZXMgKCkge1xyXG4gICAgdGhpcy5wYWdlcyA9IHtcclxuICAgICAgYWJvdXQ6IG5ldyBBYm91dCgpLFxyXG4gICAgICBob21lOiBuZXcgSG9tZSgpXHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5wYWdlID0gdGhpcy5wYWdlc1t0aGlzLnRlbXBsYXRlXVxyXG4gICAgdGhpcy5wYWdlLmNyZWF0ZSgpXHJcblxyXG4gICAgdGhpcy5vblJlc2l6ZSgpXHJcbiAgfVxyXG5cclxuICAvKioqKlxyXG4gICAqIEVWRU5UU1xyXG4gICAqICoqKi9cclxuICBvblByZWxvYWRlZCAoKSB7XHJcbiAgICB0aGlzLm9uUmVzaXplKClcclxuXHJcbiAgICB0aGlzLnBhZ2Uuc2hvdygpXHJcbiAgfVxyXG5cclxuICBvblBvcFN0YXRlICgpIHtcclxuICAgIHRoaXMub25DaGFuZ2Uoe1xyXG4gICAgICB1cmw6IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSxcclxuICAgICAgcHVzaDogZmFsc2VcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBhc3luYyBvbkNoYW5nZSAoeyB1cmwsIHB1c2ggPSB0cnVlIH0pIHtcclxuICAgIGF3YWl0IHRoaXMucGFnZS5oaWRlKClcclxuXHJcbiAgICBjb25zdCByZXF1ZXN0ID0gYXdhaXQgd2luZG93LmZldGNoKHVybClcclxuICAgIGlmIChyZXF1ZXN0LnN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZXF1ZXN0LnRleHQoKVxyXG4gICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG5cclxuICAgICAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKHt9LCAnJywgdXJsKVxyXG5cclxuICAgICAgaWYgKHB1c2gpIHtcclxuICAgICAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUoe30sICcnLCB1cmwpXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGRpdi5pbm5lckhUTUwgPSBodG1sXHJcblxyXG4gICAgICBjb25zdCBkaXZDb250ZW50ID0gZGl2LnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50JylcclxuXHJcbiAgICAgIHRoaXMudGVtcGxhdGUgPSBkaXZDb250ZW50LmdldEF0dHJpYnV0ZSgnZGF0YS10ZW1wbGF0ZScpXHJcblxyXG4gICAgICB0aGlzLm5hdmlnYXRpb24ub25DaGFuZ2UodGhpcy50ZW1wbGF0ZSlcclxuXHJcbiAgICAgIHRoaXMuY29udGVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGVtcGxhdGUnLCB0aGlzLnRlbXBsYXRlKVxyXG4gICAgICB0aGlzLmNvbnRlbnQuaW5uZXJIVE1MID0gZGl2Q29udGVudC5pbm5lckhUTUxcclxuXHJcbiAgICAgIHRoaXMuY2FudmFzLm9uQ2hhbmdlRW5kKHRoaXMudGVtcGxhdGUpXHJcblxyXG4gICAgICB0aGlzLnBhZ2UgPSB0aGlzLnBhZ2VzW3RoaXMudGVtcGxhdGVdXHJcbiAgICAgIHRoaXMucGFnZS5jcmVhdGUoKVxyXG5cclxuICAgICAgdGhpcy5vblJlc2l6ZSgpXHJcblxyXG4gICAgICB0aGlzLnBhZ2Uuc2hvdygpXHJcblxyXG4gICAgICB0aGlzLmFkZExpbmtMaXN0ZW5lcnMoKVxyXG4gICAgICB0aGlzLmNyZWF0ZUFuaW1hdGlvbnMoKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS5sb2coJ0Vycm9yJylcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uUmVzaXplICgpIHtcclxuICAgIGlmICh0aGlzLnBhZ2UgJiYgdGhpcy5wYWdlLm9uUmVzaXplKSB7XHJcbiAgICAgIHRoaXMucGFnZS5vblJlc2l6ZSgpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjcmVhdGVBbmltYXRpb25zICgpIHtcclxuICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1hbmltYXRlXScpXHJcbiAgICBpZiAoZWxlbWVudCA9PT0gbnVsbCkgcmV0dXJuXHJcblxyXG4gICAgY29uc3QgaW50ZXJzZWN0aW9uT2JzZXJ2ZXJTY3JvbGwgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoXHJcbiAgICAgIGVudHJpZXMgPT4ge1xyXG4gICAgICAgIGVudHJpZXMuZm9yRWFjaChlbnRyeSA9PiB7XHJcbiAgICAgICAgICBpZiAoZW50cnkuaXNJbnRlcnNlY3RpbmcpIHtcclxuICAgICAgICAgICAgZW50cnkudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICByb290TWFyZ2luOiAnMHB4J1xyXG4gICAgICB9XHJcbiAgICApXHJcbiAgICBlbGVtZW50LmZvckVhY2goYW5pbWF0ZUVsZW1lbnQgPT4gaW50ZXJzZWN0aW9uT2JzZXJ2ZXJTY3JvbGwub2JzZXJ2ZShhbmltYXRlRWxlbWVudCkpXHJcbiAgfVxyXG5cclxuICBvblRvdWNoRG93biAoZXZlbnQpIHtcclxuICB9XHJcblxyXG4gIG9uVG91Y2hNb3ZlIChldmVudCkge1xyXG4gIH1cclxuXHJcbiAgb25Ub3VjaFVwIChldmVudCkge1xyXG4gIH1cclxuXHJcbiAgb25XaGVlbCAoZXZlbnQpIHtcclxuICAgIGNvbnN0IG5vcm1hbGl6ZWRXaGVlbCA9IE5vcm1hbGl6ZVdoZWVsKGV2ZW50KVxyXG5cclxuICAgIGlmICh0aGlzLnBhZ2UgJiYgdGhpcy5wYWdlLnVwZGF0ZSkge1xyXG4gICAgICB0aGlzLnBhZ2Uub25XaGVlbChub3JtYWxpemVkV2hlZWwpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKioqKlxyXG4gICAqIExPT1BTXHJcbiAgICogKioqL1xyXG4gIHVwZGF0ZSAoKSB7XHJcbiAgICBpZiAodGhpcy5wYWdlICYmIHRoaXMucGFnZS51cGRhdGUpIHtcclxuICAgICAgdGhpcy5wYWdlLnVwZGF0ZSgpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKioqKlxyXG4gICAqIExJU1RFTkVSU1xyXG4gICAqICoqKi9cclxuICBhZGRFdmVudExpc3RlbmVycyAoKSB7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V3aGVlbCcsIHRoaXMub25XaGVlbC5iaW5kKHRoaXMpKVxyXG5cclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLm9uVG91Y2hEb3duLmJpbmQodGhpcykpXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5vblRvdWNoTW92ZS5iaW5kKHRoaXMpKVxyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLm9uVG91Y2hVcC5iaW5kKHRoaXMpKVxyXG5cclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5vblRvdWNoRG93bi5iaW5kKHRoaXMpKVxyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMub25Ub3VjaE1vdmUuYmluZCh0aGlzKSlcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMub25Ub3VjaFVwLmJpbmQodGhpcykpXHJcblxyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgdGhpcy5vblBvcFN0YXRlLmJpbmQodGhpcykpXHJcblxyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMub25SZXNpemUuYmluZCh0aGlzKSlcclxuICB9XHJcblxyXG4gIGFkZExpbmtMaXN0ZW5lcnMgKCkge1xyXG4gICAgY29uc3QgbGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdhJylcclxuXHJcbiAgICBlYWNoKGxpbmtzLCBsaW5rID0+IHtcclxuICAgICAgbGluay5vbmNsaWNrID0gZXZlbnQgPT4ge1xyXG4gICAgICAgIGlmIChsaW5rLmhhc0F0dHJpYnV0ZSgnZGF0YS1hbmNob3InKSAhPT0gdHJ1ZSAmJiBsaW5rLmhhc0F0dHJpYnV0ZSgndGFyZ2V0JykgIT09IHRydWUgJiYgbGluay5oYXNBdHRyaWJ1dGUoJ2RhdGEtY29udGFjdCcpICE9PSB0cnVlKSB7XHJcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICAgICAgICBjb25zdCB7IGhyZWYgfSA9IGxpbmtcclxuICAgICAgICAgIHRoaXMub25DaGFuZ2UoeyB1cmw6IGhyZWYgfSlcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgY29uc3Qgc29jaWFsTGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdwLnNvY2lhbC1saW5rJylcclxuXHJcbiAgICBlYWNoKHNvY2lhbExpbmtzLCBsaW5rID0+IHtcclxuICAgICAgbGluay5vbmNsaWNrID0gZXZlbnQgPT4ge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuICAgICAgICB3aW5kb3cub3BlbihsaW5rLmdldEF0dHJpYnV0ZSgnZGF0YS1saW5rJyksICdfYmxhbmsnKVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gIH1cclxufVxyXG5cclxubmV3IEFwcCgpXHJcbiIsIl9fd2VicGFja19yZXF1aXJlX18uaCA9ICgpID0+IChcIjIyODhiZmMwMDMyOTMzNWMyZmRmXCIpIl0sIm5hbWVzIjpbIk5vcm1hbGl6ZVdoZWVsIiwiZWFjaCIsIlByZWxvYWRlciIsIkFib3V0IiwiSG9tZSIsIkFwcCIsImNvbnN0cnVjdG9yIiwiY3JlYXRlQ29udGVudCIsImNyZWF0ZVByZWxvYWRlciIsImNyZWF0ZVBhZ2VzIiwiYWRkRXZlbnRMaXN0ZW5lcnMiLCJhZGRMaW5rTGlzdGVuZXJzIiwib25SZXNpemUiLCJ1cGRhdGUiLCJwcmVsb2FkZXIiLCJjYW52YXMiLCJvbmNlIiwib25QcmVsb2FkZWQiLCJiaW5kIiwiY29udGVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInRlbXBsYXRlIiwiZ2V0QXR0cmlidXRlIiwicGFnZXMiLCJhYm91dCIsImhvbWUiLCJwYWdlIiwiY3JlYXRlIiwic2hvdyIsIm9uUG9wU3RhdGUiLCJvbkNoYW5nZSIsInVybCIsIndpbmRvdyIsImxvY2F0aW9uIiwicGF0aG5hbWUiLCJwdXNoIiwiaGlkZSIsInJlcXVlc3QiLCJmZXRjaCIsInN0YXR1cyIsImh0bWwiLCJ0ZXh0IiwiZGl2IiwiY3JlYXRlRWxlbWVudCIsImhpc3RvcnkiLCJwdXNoU3RhdGUiLCJpbm5lckhUTUwiLCJkaXZDb250ZW50IiwibmF2aWdhdGlvbiIsInNldEF0dHJpYnV0ZSIsIm9uQ2hhbmdlRW5kIiwiY3JlYXRlQW5pbWF0aW9ucyIsImNvbnNvbGUiLCJsb2ciLCJlbGVtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImludGVyc2VjdGlvbk9ic2VydmVyU2Nyb2xsIiwiSW50ZXJzZWN0aW9uT2JzZXJ2ZXIiLCJlbnRyaWVzIiwiZm9yRWFjaCIsImVudHJ5IiwiaXNJbnRlcnNlY3RpbmciLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJhZGQiLCJyb290TWFyZ2luIiwiYW5pbWF0ZUVsZW1lbnQiLCJvYnNlcnZlIiwib25Ub3VjaERvd24iLCJldmVudCIsIm9uVG91Y2hNb3ZlIiwib25Ub3VjaFVwIiwib25XaGVlbCIsIm5vcm1hbGl6ZWRXaGVlbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJsaW5rcyIsImxpbmsiLCJvbmNsaWNrIiwiaGFzQXR0cmlidXRlIiwicHJldmVudERlZmF1bHQiLCJocmVmIiwic29jaWFsTGlua3MiLCJvcGVuIl0sInNvdXJjZVJvb3QiOiIifQ==